---



title: liunx学习
author: 马福俊
date: '2022-11-15'
slug: Liunx学习
categories: []
tags:
  - 大数据
layout: post
math: no 
---

##                        大数据学习之Linux

### 第一章 概述

- Linux 是一个免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。
- 安装

### 第二章 Liunx 文件和目录结构

1. Liunx文件
   - Liunx系统中一切皆文件
2. Liunx目录结构
   - ![image-20221115204243429](https://raw.githubusercontent.com/MFJmfj123/My_File/main/imgs/202211152044587.png)
   - 一些重要的目录
     - /bin : 是Binary 的缩写，这个目录存放着经常使用的命令
     - /home:存放普通用户的之目录，在Liunx中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的
     - /root:该目录为系统管理员，也称超级系通的用户目录
     - /etc:所用的系统管理所需的配置文件和子目录
     - /usr:这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于window下的program file目录。
     - /boot：这里存放着启动Liunx时使用的一些核心文件，包括一些连接文件以及镜像。
     - /media：linux系统会自动识别一些设备,例如U盘、光驱等等，当识别后,
       linux会把识别的设备挂载到这个目录下。
     - /mnt：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部
       系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里的内容了。
     - /opt:这是给主机额外安装软件的目录。
     - /var：把经常修改的目录文件放在这个目录下。

### 第三章 vi/vim编辑器

1. 概述

   - vi是Unix操作系统和类Unix操作系统中最通用的文本编辑器。
   - VIM编辑器是从VI发展出来的一个性能更强大的文本编辑器。可以主动的以字体颜色辨别语法的正确性，方便程序设计。VIM与VI编辑器完全兼容。

2. 三种模式

   - 一般模式：以vi/vim打开一个档案就直接进入一般模式了（这是**默认的模式**）。在这个模式中， 你可以使用『上下左右』按键来移动光标，你可以使用『删除字符』或『删除整行』来处理档案内容， 也可以使用『复制、贴上』来处理你的文件数据。

   - 常用语法

     | yy      | 复制光标当前一行         |
     | ------- | ------------------------ |
     | y数字y  | 复制一段（第几行到第行） |
     | p       | 箭头移动到目的行粘贴     |
     | u       | 撤销上一步               |
     | dd      | 删除光标当前行           |
     | d数字d  | 删除光标后多少行         |
     | x       | 删除一个字母             |
     | X       | 删除一个字母             |
     | yw      | 复制一个词               |
     | dw      | 删除一个词               |
     | ^       | 移动到行头               |
     | $       | 移动到行尾               |
     | gg或1+G | 移动到页头               |
     | G       | 移动到页尾               |
     | 数字+G  | 移动到目标行             |

   - 编辑模式

     | 按键 | 功能                   |
     | ---- | ---------------------- |
     | i    | **当前光标前**         |
     | a    | 当前光标后             |
     | o    | **当前光标行的下一行** |
     | l    | 光标所在行最前         |
     | A    | 光标所在行最后         |
     | O    | 当前光标行的上一行     |

     - ​	退出编辑模式
       - 按『Esc』键

   - 命令模式

     - **在一般模式当中**，输入『 **: / ?**』3个中的任何一个按钮，就可以将光标移动到最底下那一行。

     - 基本语法

     - | :w                       | **保存**                                                     |
       | ------------------------ | ------------------------------------------------------------ |
       | :q                       | **退出**                                                     |
       | :!                       | **强制执行**                                                 |
       | : %s/旧字符/新字符       | **批量替换**                                                 |
       | / 要查找的词             | n 查找下一个，N 往上查找                                     |
       | ? 要查找的词             | n是查找上一个，N是往下查找                                   |
       | :set nu                  | 显示行号                                                     |
       | :set nonu                | 关闭行号                                                     |
       | ZZ（shift+zz）     :nohl | **没有修改文件直接退出，如果修改了文件保存后退**  **去除高亮显示** |

### 第四章 Linux命令

1. 启动和关停服务

   - systemctl start   服务名     （功能描述：开启服务）

     systemctl  stop   服务名     （功能描述：关闭服务）

     systemctl  restart  服务名    （功能描述：重新启动服务）

     systemctl  status  服务名    （功能描述：查看服务状态）

     systemctl --type  service     （功能描述：查看正在运行的服务）

   - systemctl  list-unit-files   （功能描述：查看所有服务器自启配置）

     systemctl  disable 服务名  （功能描述：关掉指定服务的自动启动）

     systemctl  enable  服务名 （功能描述：开启指定服务的自动启动）

     systemctl  is-enabled 服务名（功能描述：查看服务开机启动状态）

   - 关机重启命令

     - sysc(将数据同步到硬盘中)

     - poweroff（关闭系统）

     - reboot(重启系统)

     - shutdown [选项] 时间

       - | 选项 | 功能          |
         | ---- | ------------- |
         | -h   | -h=halt关机   |
         | -r   | -r=reboot重启 |

       - | 参数 | 功能                                   |
         | ---- | -------------------------------------- |
         | now  | 立刻关机                               |
         | 时间 | 等待多久后关机（时间单位是**分钟**）。 |

   

2. 帮助命令

   - man 获得帮助信息

     - man [命令和配置文件]  （获得帮助信息）

     - | 信息        | 功能                     |
       | ----------- | ------------------------ |
       | NAME        | 命令的名称和单行描述     |
       | SYNOPSIS    | 怎样使用命令             |
       | DESCRIPTION | 命令功能的深入讨论       |
       | EXAMPLES    | 怎样使用命令的例子       |
       | SEE ALSO    | 相关主题（通常是手册页） |

   - help 命名 （获得shell 内置命令的帮助信息）

   - 常用的快捷键

     - | 常用的快捷键    | 功能                         |
       | --------------- | ---------------------------- |
       | ctrl + c        | 停止进程                     |
       | ctrl+l          | 清屏                         |
       | ctrl + q        | 退出                         |
       | **善于用tab键** | 提示(更重要的是可以防止敲错) |
       | **上下键**      | 查找执行过的命令             |
       | ctrl +alt       | linux和Windows之间切换       |

3. 文件目录类

   - pwd (显示当前目录的绝对路径)

   - ls （列出目录内容）

     - 语法; ls [选项] [目录或是文件]

     - | 选项 | 功能                                                      |
       | ---- | --------------------------------------------------------- |
       | -a   | 全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用) |
       | -l   | 长数据串列出，包含文件的属性与权限等等数据；(常用)        |

     - 每行列出的信息依次是： 文件类型与权限  链接数  文件属主  文件属组  文件大小用byte来表示  建立或最近修改的时间  名字

   - cd 切换目录 

     - | 参数        | 功能                                 |
       | ----------- | ------------------------------------ |
       | cd 绝对路径 | **切换路径**                         |
       | cd相对路径  | **切换路径**                         |
       | cd ~或者cd  | 回到自己的家目录                     |
       | cd -        | 回到上一次所在目录                   |
       | cd ..       | 回到当前目录的上一级目录             |
       | cd -P       | 跳转到实际物理路径，而非快捷方式路径 |

   - mkdir 建立目录

     - 语法：mkdir[选项] 要建立的目录

     - | 选项 | 功能         |
       | ---- | ------------ |
       | -p   | 创建多层目录 |

   - rmdir 删除一个空目录 

     - 语法：rmdir 删除的目录

   - touch 创建空文件

     - 语法 ：touch 文件名

   - cp 文件复制或目录

     - 语法：cp [选项] source dest 

     - | 选项 | 功能               |
       | ---- | ------------------ |
       | -r   | 递归复制整个文件夹 |

     - | 参数   | 功能     |
       | ------ | -------- |
       | source | 源文件   |
       | dest   | 目标文件 |

   - rm 移除文件或目录

     - 语法：rm [选项] deletefile 

     - | 选项 | 功能                                     |
       | ---- | ---------------------------------------- |
       | -r   | 递归删除目录中所有内容                   |
       | -f   | 强制执行删除操作，而不提示用于进行确认。 |
       | -v   | 显示指令的详细执行过程                   |

   - mv 移动文件与 文件或者目录重命名

     - mv oldNameFile newNameFile  （功能描述：重命名）
     - mv /temp/movefile /targetFolder  （功能描述：移动文件）

   - cat 查看文件内容

     - cat [选项] 想要查看的文件

     - | 选项 | 功能描述                     |
       | ---- | ---------------------------- |
       | -n   | 显示所有行的行号，包括空行。 |

   - more 文件内容分屏查看器

     - more 要查看的文件

     - | 操作           | 功能说明                                 |
       | -------------- | ---------------------------------------- |
       | 空白键 (space) | 代表向下翻一页；                         |
       | Enter          | 代表向下翻『一行』；                     |
       | q              | 代表立刻离开 more ，不再显示该文件内容。 |
       | Ctrl+F         | 向下滚动一屏                             |
       | Ctrl+B         | 返回上一屏                               |
       | =              | 输出当前行的行号                         |
       | :f             | 输出文件名和当前行的行号                 |

   - less 分屏显示文件内容

     - less 要查看的文件

     - | 操作       | 功能说明                                           |
       | ---------- | -------------------------------------------------- |
       | 空白键     | 向下翻动一页；                                     |
       | [pagedown] | 向下翻动一页                                       |
       | [pageup]   | 向上翻动一页；                                     |
       | /字串      | 向下搜寻『字串』的功能；n：向下查找；N：向上查找； |
       | ?字串      | 向上搜寻『字串』的功能；n：向上查找；N：向下查找； |
       | q          | 离开 less 这个程序；                               |

   - echo 输出内容到控制台

     - echo [选项] [输出内容]

   - head 显示文件头部内容

     - 语法：head 文件 或者 head -n 5 文件

     - | 选项      | 功能                   |
       | --------- | ---------------------- |
       | -n <行数> | 指定显示头部内容的行数 |

   - tail 输出文件尾部内容

     - 语法：tail 文件 （默认十行）

     - tail -n 5 文件 （最后5行）

     - tail -f 文件 （实时追踪该文档的所有更新）

     - | 选项     | 功能                                 |
       | -------- | ------------------------------------ |
       | -n<行数> | 输出文件尾部n行内容                  |
       | -f       | 显示文件最新追加的内容，监视文件变化 |

   - ">"覆盖 和 ">>"追加

     - 语法：（1）ll >文件    （功能描述：列表的内容写入文件a.txt中（**覆盖写**））

       （2）ll >>文件      （功能描述：列表的内容**追加**到文件aa.txt的末尾）

       （3）cat 文件1 > 文件2  （功能描述：将文件1的内容覆盖到文件2）

       （4）echo “内容” >> 文件

   - ln 软链接

     - 软链接也成为符号链接，类似于windows里的快捷方式，有自己的数据块，主要存放了链接其他文件的路径。
     - ln -s [原文件或目录] [软链接名]    （功能描述：给原文件创建一个软链接）
     - 删除软链接： rm -rf 软链接名，而不是rm -rf 软链接名

   - history

     - 基本语法 ：history                    （功能描述：查看已经执行过历史命令）

4. 用户管理命令

   - useradd 添加新用户

     - 基本语法

       ​    useradd 用户名          （功能描述：添加新用户）

       ​    useradd -g 组名 用户名   （功能描述：添加新用户到某个组）

   - passwd 设置用户密码

     - passwd 用户名   （功能描述：设置用户密码）

   - id 查看用户是否存在

     - id 用户名

   - /etc/passwd 查看创建了哪些用户

   - su 切换用户

   - userdel 删除用户

     - 基本语法

       （1）userdel 用户名     （功能描述：删除用户但保存用户主目录）

       （2）userdel -r 用户名    （功能描述：用户和用户主目录，都删除）

     - | 选项 | 功能                                       |
       | ---- | ------------------------------------------ |
       | -r   | 删除用户的同时，删除与用户相关的所有文件。 |

   - who 查看登录用户信息

     - 基本语法

       （1）whoami       （功能描述：显示自身用户名称）

       （2）who am i       （功能描述：显示**登录用户**的用户名）

   - 设置普通用户具有root权限

     - vi /etc/sudoers

     - 修改 /etc/sudoers 文件，找到下面一行(91行)，在root下面添加一行，如下所示：

       \## Allow root to run any commands anywhere

       root  ALL=(ALL)   ALL

       atguigu  ALL=(ALL)   ALL

   - usermod 修改用户

     - usermod -g 用户组 用户名

     - | 选项 | 功能                                   |
       | ---- | -------------------------------------- |
       | -g   | 修改用户的初始登录组，给定的组必须存在 |

   - 用户组管理命令：每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同，

     - groupadd 新增组 ：groupadd 组名
     - groupdel 删除组 ：groupdel 组名
     - groupmod 修改组： groupmod -n 新组名 老组名
     -  cat /etc/group 查看创建了哪些组

5. 文件权限类

   Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。在Linux中我们可以使用ll或者ls -l命令来显示一个文件的属性以及文件所属的用户和组

   - 文件属性：
     
     - ![image-20221115220839247](M:%5CBlog%5Cmywebsite%5Cmywebsite%5Ccontent%5Cposts%5C2022-11-15-liunx%5CLiunx%E5%AD%A6%E4%B9%A0.assets%5Cimage-20221115220839247-1668561556038.png)
     
     - 0位的表示类型：在Linux中第一个字符代表这个目录，文件或者来链接文件
     
       -代表文件
     
       d代表目录
     
       l链接文档
     
     - 第1-3位确定所属主（该文件的所有者）拥有该文件的权限。--User
     
     - 第4-6位表示确定所属组(该文件的同组用户）拥有该文件的权限。--Group
     
     - 第7-9位确定其他用户拥有该文件的权限 ---Other
     
   - 改变权限：第一种方式改变权限：chmod [{ugoa}{+-=}{rwx}] 文件或者目录

     - 第二种方式：chmod [mode=421] [文件或者目录]

   - chmod 改变所有者

     - chmod [选项] [最终用户] 文件或者目录 改变文件或者目录的所属着
     - —R 递归操作

6. 搜索查找类

   - find查找文件或者目录

     - find指令将从指定目录向下递归的遍历各个子目录，满足条件的文件显示在终端。

     -  基本语法：find [搜索范围] [选项]

     - | 选项            | 功能                             |
       | --------------- | -------------------------------- |
       | -name<查询方式> | 按照指定的文件名查找模式查找文件 |
       | -user<用户名>   | 查找属于指定用户名所有文件       |
       | -size<文件大小> | 按照指定的文件大小查找文件。     |

   - grep 过滤查找及”|“管道符

     - 管道符，“|”，表示将前一个命令的处理结果输出传递给后面的命令处理
     - 基本语法：grep 选项 查找内容 源文件
     - -n 显示匹配行号

   - which查找命令

     - which 命令 文件或者目录

7. 压缩和解压类

   - gzip/gunzip

     - 基本语法：gzip 文件 压缩为.gz文件
     - gunzip 文件.gz (解压文件)

   - zip/unzip 压缩

     - zip [选项] XXX.zip 将要压缩的内容  （功能描述：压缩文件和目录的命令）

     - unzip  XXX.zip [选项] [解压的路径]                 （功能描述：解压缩文件）

     - | zip选项 | 功能     |
       | ------- | -------- |
       | -r      | 压缩目录 |

     - | unzip选项 | 功能                     |
       | --------- | ------------------------ |
       | -d<目录>  | 指定解压后文件的存放目录 |

   - tar 打包

     - 基本语法：tar [选项] XXX.tar.gz 将要打包进去的内容       （功能描述：打包目录，压缩后的文件格式.tar.gz）

     - | 选项   | 功能                         |
       | ------ | ---------------------------- |
       | -z     | 用gzip对存档进行压缩或解压   |
       | **-c** | **产生****.tar****打包文件** |
       | -v     | 显示详细信息                 |
       | -f     | 指定被处理的档案名           |
       | **-x** | **解包****.tar****文件**     |

8. 磁盘分区类

   - df 选项 （功能描述：列出文件系统的整体磁盘使用量，检查文件系统的磁盘空间占用情况）df: disk free 空余硬盘

   - fdisk 查看分区 

     - fdisk -l         （功能描述：查看磁盘分区详情）

     - | -l   | 显示所有硬盘的分区列表 |
       | ---- | ---------------------- |
       |      |                        |

   - mount/umount 挂载/卸载

9. ps 查看当前系统进程状态

   - ps :process status

     - 基本语法：ps - aux |grep xxx (查看系统中的所有进程)

       ps - ef |grep xxx (查看父进程和子进程之间的关系)

     - 选项说明

     - | -a   | 选择所有进程           |
       | ---- | ---------------------- |
       | -u   | 显示所有用户的所有进程 |
       | -x   | 显示没有终端的进程     |

10. kill 终止进程

    - 基本语法：kill [选项] 进程号

      killall 进程名称

11. pstree 查看进程树

    - 基本语法:pstree [选项]

      - | 选项 | 功能               |
        | ---- | ------------------ |
        | -p   | 显示进程的PID      |
        | -u   | 显示进程的所属用户 |

12. top 查看系统健康状态

    - top [选项]

    - | 选项    | 功能                                                         |
      | ------- | ------------------------------------------------------------ |
      | -d 秒数 | 指定top命令每隔几秒更新。默认是3秒在top命令的交互模式当中可以执行的命令： |
      | -i      | 使top不显示任何闲置或者僵死进程。                            |
      | -p      | 通过指定监控进程ID来仅仅监控某个进程的状态。                 |

    - | P    | 以CPU使用率排序，默认就是此项 |
      | ---- | ----------------------------- |
      | M    | 以内存的使用率排序            |
      | N    | 以PID排序                     |
      | q    | 退出top                       |

13. netstat显示网路统计信息和端口占有情况

    - 基本语法：netstat -anp |grep 进程号 （查看该进程网络信息）

      netstat -nlp | grep 端口号 （查看网络端口号占用情况）

    - | 选项 | 功能                                     |
      | ---- | ---------------------------------------- |
      | -n   | 拒绝显示别名，能显示数字的全部转化成数字 |
      | -l   | 仅列出有在listen（监听）的服务状态       |
      | -p   | 表示显示哪个进程在调用                   |

14. crond 系统定时任务

    - crontab [选项]

    - | 选项 | 功能                          |
      | ---- | ----------------------------- |
      | -e   | 编辑crontab定时任务           |
      | -l   | 查询crontab任务               |
      | -r   | 删除当前用户所有的crontab任务 |

15. RPM 软件包管理

    - rpm -qa (功能描述：查询所有的安装的rpm软件包)

    - RPM卸载命令（rpm -e）

      - （1）rpm -e RPM软件包  

        （2） **rpm -e --nodeps** **软件包** 

      - | 选项     | 功能                                                         |
        | -------- | ------------------------------------------------------------ |
        | -e       | 卸载软件包                                                   |
        | --nodeps | 卸载软件时，不检查依赖。这样的话，那些使用该软件包的软件在此之后可能就不能正常工作了。 |

      - 

    - RPM安装命令（rpm -ivh）

      - **rpm -ivh RPM****包全名**

      - | 选项     | 功能                     |
        | -------- | ------------------------ |
        | -i       | -i=install，安装         |
        | -v       | -v=verbose，显示详细信息 |
        | -h       | -h=hash，进度条          |
        | --nodeps | --nodeps，不检测依赖进度 |

      - 

16. YUM仓库配置

    - yum [选项] [参数]

    - -y (多所有问答都回答”yes“)

    - | 参数                     | 功能                          |
      | ------------------------ | ----------------------------- |
      | Install （常用，仅一个） | 安装rpm软件包                 |
      | update                   | 更新rpm软件包                 |
      | check-update             | 检查是否有可用的更新rpm软件包 |
      | erase                    | 删除指定的rpm软件包           |
      | list                     | 显示软件包信息                |
      | clean                    | 清理yum过期的缓存             |
      | deplist                  | 显示yum软件包的所有依赖关系   |

17. 时间日期类

    - 基本语法 ：date [OPTION]... [+FORMAT]

      - | 选项           | 功能                                           |
        | -------------- | ---------------------------------------------- |
        | -d<时间字符串> | 显示指定的“时间字符串”表示的时间，而非当前时间 |
        | -s<日期时间>   | 设置系统日期时间                               |

      - | 参数            | 功能                         |
        | --------------- | ---------------------------- |
        | <+日期时间格式> | 指定显示时使用的日期时间格式 |

    - date 显示当前时间

      - 基本语法

           （1）date                            （功能描述：显示当前时间）

        ​    （2）date +%Y                        （功能描述：显示当前年份）

        ​	（3）date +%m                        （功能描述：显示当前月份）

        ​	（4）date +%d                        （功能描述：显示当前是哪一天）

        ​    （5）date "+%Y-%m-%d %H:%M:%S"      （功能描述：显示年月日时分秒）

    - date 显示非当前时间

      - 基本语法

        （1）date -d '1 days ago'          （功能描述：显示前一天时间）

        （2）date -d '-1 days ago'          （功能描述：显示明天时间）

    - date 设置系统时间

      - 基本语法：date -s 字符串时间

    - cal 查看日历

      - cal [选项]          （功能描述：不加选项，显示本月日历）

      - | 选项       | 功能             |
        | ---------- | ---------------- |
        | 具体某一年 | 显示这一年的日历 |

    

    

